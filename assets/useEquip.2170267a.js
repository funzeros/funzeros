import{B as p}from"./index.399cf2a1.js";import{G as i}from"./custom.daebdf6c.js";class l{constructor(e,a,o){this.name=e,this.id=this.chatCodeAtAll(e),this.style=a,this.attrs=o}chatCodeAtAll(e){return+e.split("").map(a=>a.charCodeAt(0)).join("")}}const b=[["\u5492","height: 100%;width: 100%;background-color: rgb(66,66,66);clip-path: polygon(20% 17%, 32% 16%, 48% 26%, 57% 27%, 72% 15%, 81% 16%, 83% 24%, 78% 33%, 82% 42%, 76% 89%, 20% 90%, 17% 45%, 22% 36%, 18% 24%);filter",{def:[{value:10}],vit:[{value:1}]}]],g=b.map(t=>new l(...t)),m=[["\u98CE","height: 100%;width: 100%;background-image: linear-gradient(to right, #92fe9d 0%, #00c9ff 100%);clip-path: polygon(20% 17%, 32% 16%, 48% 26%, 57% 27%, 72% 15%, 81% 16%, 83% 24%, 78% 33%, 82% 42%, 76% 89%, 20% 90%, 17% 45%, 22% 36%, 18% 24%);filter",{def:[{value:10}],dex:[{value:1}]}]],P=m.map(t=>new l(...t)),f=[["\u68B5","height:20%;width:20%;position: absolute;top: 40%;left: 40%;border-radius: 50%;background-image: linear-gradient(to top, #d5d4d0 0%, #e9e9e7 100%);",{vit:[{value:2}]}]],w=f.map(t=>new l(...t)),v=[["\u51F0"," position: absolute;top: 0;left: 0;width: 100%;height: 100%;clip-path: polygon(26% 1%,5% 46%,28% 53%,9% 81%,32% 89%,62% 86%,62% 63%,82% 89%,70% 57%,95% 73%,79% 46%,92% 25%,41% 53%,64% 9%,37% 40%,40% 8%,22% 41%);background-image: linear-gradient(to top, #ff0844 0%, #ffb199 100%);",{hp:[{value:5},{value:.1,isPercent:!0}]}]],E=v.map(t=>new l(...t)),k=[["\u9ED8"," width: 90%;height: 90%;background-image: linear-gradient(to left, #bdbbbe 0%, #9d9ea3 100%),radial-gradient(88% 271%,rgba(255, 255, 255, 0.25) 0%,rgba(254, 254, 254, 0.25) 1%,rgba(0, 0, 0, 0.25) 100%),radial-gradient(50% 100%,rgba(255, 255, 255, 0.3) 0%,rgba(0, 0, 0, 0.3) 100%);clip-path: polygon(0% 25%,10% 70%,50% 100%,90% 70%,100% 25%,75% 0%,50% 15%,25% 0%);",{def:[{value:2}],vit:[{value:.2}]}]],y=k.map(t=>new l(...t)),A=[["\u70BD","background-color: rgb(255, 128, 128);height: 10%;width: 60%;",{str:[{value:.2}]}]],B=A.map(t=>new l(...t)),x=[["\u7981","position: absolute;top: 0;left: 0;width: 100%;height: 100%;background: conic-gradient(from 90deg, #666, #eee);opacity: 0.5;mix-blend-mode: overlay;",{atk:[{value:.4}]}]],F=x.map(t=>new l(...t)),C=[["\u5203","height: 60%;width: 10%;border-top-right-radius: 50%;border-top-left-radius: 50%;background-color: rgb(200, 200, 200);",{atk:[{value:10}],as:[{value:100,isFixed:!0}]}]],D=C.map(t=>new l(...t)),$=[["\u98CE","width: 30%;height: 10%;background-image: linear-gradient(to right,#fcc5e4 0%,#fda34b 15%,#ff7882 35%,#c8699e 52%);border-radius: 40% 40% 40% 40% / 60% 60% 40% 40%;",{dex:[{value:2}],hit:[{value:-2,isFixed:!0}]}]],j=$.map(t=>new l(...t)),q=[["\u950B","box-shadow: 0 0 6px 2px #fff, 0 0 1px 0 #000 inset;",{atk:[{value:10,isPercent:!0,isFixed:!0}],str:[{value:-10,isPercent:!0,isFixed:!0}]}]],L=q.map(t=>new l(...t)),N=[["\u767D\u864E","margin-top: -5%;width: 10%;height: 10%;background-image: linear-gradient(to top, #ff0844 0%, #ffb199 100%);border-radius: 50%;",{atk:[{value:.1,isPercent:!0}]}]],O=N.map(t=>new l(...t)),M=[["\u9798","height: 80%;width: 16%;border-top-right-radius: 50%;border-top-left-radius: 50%;background-image: linear-gradient(15deg, #13547a 0%, #80d0c7 100%);border: 1px solid #000;",{str:[{value:.3,isPercent:!0}]}]],T=M.map(t=>new l(...t)),V=[["\u7FE0","width: 10%;height: 20%;background-image: linear-gradient(to right, #868f96 0%, #596164 100%);border-radius: 0 0 50% 50% / 0 0 10% 10%;",{str:[{value:1}],dex:[{value:1}]}]],G=V.map(t=>new l(...t)),Q=[["\u9537","width: 100%;height: 10%;background-color: rgb(83, 72, 56);",{str:[{value:1}]}]],K=Q.map(t=>new l(...t)),n={100:"\u5B8C\u7F8E\u65E0\u7F3A",90:"\u9B3C\u65A7\u795E\u5DE5",80:"\u5DE7\u593A\u5929\u5DE5",70:"\u6734\u5B9E\u65E0\u534E",60:"\u5E73\u5EB8\u7565\u582A",50:"\u7C97\u5236\u6EE5\u9020"},c={weapon:{type:"weapon",baseProp:["str","atk","as","hit"],parts:[{label:"scabbard",name:"\u5251\u9798",odds:.1,partPool:T},{label:"edge",name:"\u5251\u950B",odds:.8,partPool:L},{label:"tsuba",name:"\u5251\u9537",odds:.5,partPool:K},{label:"case",name:"\u5251\u683C",odds:1,partPool:j},{label:"body",name:"\u5251\u5203",odds:1,partPool:D},{label:"stalk",name:"\u5251\u830E",odds:1,partPool:G},{label:"head",name:"\u5251\u9996",odds:.2,partPool:O}],buildName(t){const{scabbard:e,edge:a,case:o,body:r,stalk:s,head:d}=t,u=[];return e&&u.push(e),a||u.push("\u65E0\u950B"),u.push(`${o}${r}\u5251${s}${o}`),d&&u.push(d),u.join("\xB7")}},shield:{type:"shield",baseProp:["def","vit"],parts:[{label:"sharp",name:"\u76FE\u89D2",odds:.2,partPool:F},{label:"face",name:"\u76FE\u9762",odds:1,partPool:y},{label:"emblem",name:"\u76FE\u7EB9",odds:1,partPool:E},{label:"hold",name:"\u633D\u624B",odds:1,partPool:B}],buildName(t){const{sharp:e,face:a,emblem:o,hold:r}=t,s=[];return e&&s.push(e),s.push(`${o}${a}\u76FE${r}${o}`),s.join("\xB7")}},lorica:{type:"lorica",baseProp:["hp","vit"],parts:[{label:"frontBoard",name:"\u80F8\u677F",odds:1,partPool:P},{label:"heart",name:"\u62A4\u5FC3\u955C",odds:1,partPool:w},{label:"backBoard",name:"\u80CC\u677F",odds:1,partPool:g}],buildName(t){const{frontBoard:e,heart:a,backBoard:o}=t,r=[];return r.push(`${a}${e}\u8863${o}${a}`),r.join("\xB7")}}};class h extends p{constructor(e,a,o){super();this.name="",this.partData={},this.level=e,this.type=a.type,this.quality=i.randomRange(50,100),this.qualityLabel=this.getQualityLabel(o),this.buildBaseProp(a)}buildBaseProp(e){const a={},o={};e.parts.forEach(r=>{if(i.randomBoolean(r.odds)){const s=i.randomArray(r.partPool);a[r.label]=s.name,this.partData[r.label]={data:s,label:r.label,name:r.name},this.getPartProperty(o,s.attrs)}}),this.name=e.buildName(a),this.setPartProperty(o)}getPartProperty(e,a){Object.keys(a).forEach(o=>{const r=o,s=a[r];e[r]||(e[r]={value:0,percentValue:0});const d=e[r];s.forEach(u=>{d[u.isPercent?"percentValue":"value"]+=Math.floor(u.value*(u.isFixed?1:this.level))})})}setPartProperty(e){Object.keys(e).forEach(a=>{const o=a,r=e[o];this[o]=Math.floor(r.value*(100+r.percentValue)*this.quality/1e4)})}getQualityLabel(e){return Object.keys(e).reduce((a,o)=>this.quality>=+o?e[o]:a,"")}}const R=()=>({build:{weapon(t){return new h(t,c.weapon,n)},shield(t){return new h(t,c.shield,n)},lorica(t){return new h(t,c.lorica,n)}}});export{R as u};
